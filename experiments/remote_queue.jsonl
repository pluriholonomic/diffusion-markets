# Fresh queue: AR+Diffusion, AR+RLCR, AR+Diffusion+RLCR experiments on full 20k data
# Created 2025-12-29 - All jobs run in parallel for max GPU utilization

# === GPU 0 JOBS (run in parallel) ===
{"cmd": ".venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_20k_v1 --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 0 --ar-model Qwen/Qwen3-14B --ar-K 5 --ar-max-new-tokens 256 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model Qwen/Qwen3-14B --embed-device cuda --embed-dtype bfloat16 --embed-device-map auto --embed-batch-size 8 --embed-max-length 512 --diff-hidden-dim 512 --diff-depth 6 --diff-T 100 --diff-train-steps 5000 --diff-batch-size 256 --diff-lr 1e-4 --diff-samples 32 --bins 20", "gpu": "0", "id": "ar_diffusion_20k_v1"}

{"cmd": ".venv/bin/python -m forecastbench grpo_train --data-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --out-dir runs/ar_rlcr_20k_highgamma --model Qwen/Qwen3-14B --algorithm remax --reward-mode rlcr --rlcr-alpha 0.5 --rlcr-beta 1.0 --rlcr-gamma 0.5 --rlcr-use-groups --steps 2000 --batch-size 4 --K 4 --lr 2e-6 --kl-coef 0.05 --lora-r 16 --lora-alpha 32 --seed 123 --run-name ar_rlcr_20k_highgamma", "gpu": "0", "id": "ar_rlcr_20k_highgamma"}

{"cmd": ".venv/bin/python -m forecastbench grpo_train --data-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --out-dir runs/ar_rlcr_20k_nogroup --model Qwen/Qwen3-14B --algorithm remax --reward-mode rlcr --rlcr-alpha 1.0 --rlcr-beta 1.0 --rlcr-gamma 0.0 --steps 2000 --batch-size 4 --K 4 --lr 2e-6 --kl-coef 0.05 --lora-r 16 --lora-alpha 32 --seed 456 --run-name ar_rlcr_20k_nogroup", "gpu": "0", "id": "ar_rlcr_20k_nogroup"}

{"cmd": ".venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_20k_v2 --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 42 --ar-model Qwen/Qwen3-14B --ar-K 3 --ar-max-new-tokens 128 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model Qwen/Qwen3-14B --embed-device cuda --embed-dtype bfloat16 --embed-device-map auto --embed-batch-size 8 --embed-max-length 256 --diff-hidden-dim 768 --diff-depth 8 --diff-T 100 --diff-train-steps 8000 --diff-batch-size 128 --diff-lr 5e-5 --diff-samples 16 --bins 20", "gpu": "0", "id": "ar_diffusion_20k_v2"}

{"cmd": ".venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_20k_minilm --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 789 --ar-model Qwen/Qwen3-14B --ar-K 5 --ar-max-new-tokens 256 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model sentence-transformers/all-MiniLM-L6-v2 --embed-device cuda --embed-dtype float16 --embed-batch-size 64 --diff-hidden-dim 256 --diff-depth 4 --diff-T 50 --diff-train-steps 3000 --diff-batch-size 256 --diff-lr 1e-4 --diff-samples 16 --bins 20", "gpu": "0", "id": "ar_diffusion_20k_minilm"}

# === GPU 1 JOBS (run in parallel) ===
{"cmd": ".venv/bin/python -m forecastbench grpo_train --data-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --out-dir runs/ar_rlcr_20k_v1 --model Qwen/Qwen3-14B --algorithm remax --reward-mode rlcr --rlcr-alpha 1.0 --rlcr-beta 1.0 --rlcr-gamma 0.1 --rlcr-use-groups --steps 2000 --batch-size 4 --K 4 --lr 2e-6 --kl-coef 0.05 --lora-r 16 --lora-alpha 32 --seed 0 --run-name ar_rlcr_20k_v1", "gpu": "1", "id": "ar_rlcr_20k_v1"}

{"cmd": ".venv/bin/python -m forecastbench grpo_train --data-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --out-dir runs/ar_rlcr_20k_v2 --model Qwen/Qwen3-14B --algorithm dr_grpo --reward-mode rlcr --rlcr-alpha 1.0 --rlcr-beta 0.5 --rlcr-gamma 0.2 --rlcr-use-groups --steps 2000 --batch-size 4 --K 4 --lr 2e-6 --kl-coef 0.05 --lora-r 16 --lora-alpha 32 --seed 42 --run-name ar_rlcr_20k_v2", "gpu": "1", "id": "ar_rlcr_20k_v2"}

{"cmd": ".venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_20k_moresamples --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 101 --ar-model Qwen/Qwen3-14B --ar-K 3 --ar-max-new-tokens 128 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model Qwen/Qwen3-14B --embed-device cuda --embed-dtype bfloat16 --embed-device-map auto --embed-batch-size 8 --embed-max-length 256 --diff-hidden-dim 512 --diff-depth 6 --diff-T 100 --diff-train-steps 5000 --diff-batch-size 256 --diff-lr 1e-4 --diff-samples 64 --bins 20", "gpu": "1", "id": "ar_diffusion_20k_moresamples"}

# === AR+Diffusion+RLCR (depends on RLCR models finishing) ===
{"cmd": "RLCR_MODEL=$(ls -1td runs/ar_rlcr_20k_v1/checkpoint-* 2>/dev/null | head -1); if [ -z \"$RLCR_MODEL\" ]; then RLCR_MODEL=Qwen/Qwen3-14B; fi; .venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_rlcr_20k_v1 --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 0 --ar-model $RLCR_MODEL --ar-K 5 --ar-max-new-tokens 256 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model Qwen/Qwen3-14B --embed-device cuda --embed-dtype bfloat16 --embed-device-map auto --embed-batch-size 8 --embed-max-length 512 --diff-hidden-dim 512 --diff-depth 6 --diff-T 100 --diff-train-steps 5000 --diff-batch-size 256 --diff-lr 1e-4 --diff-samples 32 --bins 20", "gpu": "0", "id": "ar_diffusion_rlcr_20k_v1", "ready_if": "ar_rlcr_20k_v1"}

{"cmd": "RLCR_MODEL=$(ls -1td runs/ar_rlcr_20k_v2/checkpoint-* 2>/dev/null | head -1); if [ -z \"$RLCR_MODEL\" ]; then RLCR_MODEL=Qwen/Qwen3-14B; fi; .venv/bin/python -m forecastbench pm_hybrid_train --dataset-path polymarket_backups/pm_suite_derived/gamma_yesno_ready_20k.parquet --run-name ar_diffusion_rlcr_20k_v2 --max-rows 20000 --text-cols question,description --train-frac 0.8 --seed 42 --ar-model $RLCR_MODEL --ar-K 3 --ar-max-new-tokens 128 --ar-temperature 0.7 --ar-device cuda --ar-device-map auto --embed-model Qwen/Qwen3-14B --embed-device cuda --embed-dtype bfloat16 --embed-device-map auto --embed-batch-size 8 --embed-max-length 256 --diff-hidden-dim 768 --diff-depth 8 --diff-T 100 --diff-train-steps 8000 --diff-batch-size 128 --diff-lr 5e-5 --diff-samples 16 --bins 20", "gpu": "1", "id": "ar_diffusion_rlcr_20k_v2", "ready_if": "ar_rlcr_20k_v2"}
